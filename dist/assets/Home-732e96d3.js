import{_ as p,k as u,o as d,c,b as e,m,v as g,p as _,F as b,f as x,t as r}from"./index-8845255c.js";const w={data(){return{isLoading:!0,selectedRole:"",searchTerm:"",users:[],itemsPerPage:5,currentPage:1}},computed:{filteredList(){return!this.selectedRole&&!this.searchTerm?this.users:this.users.filter(t=>{let s=!0,n=!0;if(this.selectedRole&&(s=t.role===this.selectedRole),this.searchTerm){const a=this.searchTerm.toLowerCase();n=t.name&&t.name.toLowerCase().includes(a)||t.role&&t.role.toLowerCase().includes(a)||t.email&&t.email.toLowerCase().includes(a)||t.code&&t.code.toLowerCase().includes(a)}return s&&n})},pageCount(){return Math.ceil(this.filteredList.length/this.itemsPerPage)},startItem(){return(this.currentPage-1)*this.itemsPerPage+1},endItem(){const t=this.currentPage*this.itemsPerPage;return t>this.filteredList.length?this.filteredList.length:t},paginatedList(){const t=(this.currentPage-1)*this.itemsPerPage;return this.filteredList.slice(t,t+this.itemsPerPage)}},methods:{fetchUsers(){this.isLoading=!0,u.get("/admin/get-all-admins").then(t=>{this.users=t.data}).catch(t=>{console.error("Error fetching users:",t)}).finally(()=>{this.isLoading=!1})},applySearch(){},editUser(t){const s=this.filteredList[t].id;console.log("userId, ",s),this.$router.push({name:"EditUser",params:{id:s}})},deleteUser(t){const s=this.filteredList[t].id;confirm("Are you sure you want to delete this user?")&&u.delete(`/admin/delete-user/${s}`).then(()=>{this.fetchUsers()}).catch(n=>{console.error("Error deleting user:",n)})},createUser(){this.$router.push({name:"AccountAdmins"})},prevPage(){this.currentPage--},nextPage(){this.currentPage++}},mounted(){this.fetchUsers()}},v={class:"antialiased bg-gray-100 text-gray-600 h-screen px-4"},y={class:"flex flex-col justify-center h-full"},P={class:"w-full max-w-2xl mx-auto bg-white shadow-lg rounded-sm border border-gray-200"},k=e("header",{class:"px-5 py-4 border-b border-gray-100"},[e("h2",{class:"font-semibold text-gray-800"},"users")],-1),C={class:"p-3"},L={class:"mb-4 flex justify-between items-center"},U={class:"relative w-1/3"},I=e("option",{value:""},"All Roles",-1),R=e("option",{value:"Administratif"},"Administratif",-1),T=e("option",{value:"Comptable"},"Comptable",-1),j=[I,R,T],S=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 9l-3 3-3-3"})])],-1),A={class:"mb-4 flex justify-end"},E={class:"relative w-full mb-4"},B=e("div",{class:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 9l-3 3-3-3"})])],-1),M={class:"overflow-x-auto"},D={key:0,class:"table-auto w-full"},N=e("thead",{class:"text-xs font-semibold uppercase text-gray-400 bg-gray-50"},[e("tr",null,[e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Name")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Role")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Code")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Email")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-left"},"Tele")]),e("th",{class:"p-2 whitespace-nowrap"},[e("div",{class:"font-semibold text-center"},"Actions")])])],-1),V={class:"text-sm divide-y divide-gray-100"},F={class:"p-2 whitespace-nowrap"},H={class:"flex items-center"},q={class:"w-10 h-10 flex-shrink-0 mr-2 sm:mr-3"},z=["src","alt"],G={class:"font-medium text-gray-800"},J={class:"p-2 whitespace-nowrap"},K={class:"text-left"},O={class:"p-2 whitespace-nowrap"},Q={class:"text-left"},W={class:"p-2 whitespace-nowrap"},X={class:"text-left"},Y={class:"p-2 whitespace-nowrap"},Z={class:"text-left"},$={class:"p-2 whitespace-nowrap"},ee={class:"flex justify-center space-x-2"},te=["onClick"],se=["onClick"],oe={key:1,class:"flex justify-center items-center h-32"},ie=e("div",{class:"w-12 h-12 border-t-4 border-blue-500 border-solid rounded-full animate-spin"},null,-1),re=[ie],le={class:"mt-4 flex justify-between items-center"},ne={class:"text-sm text-gray-700"},ae={class:"flex items-center space-x-2"},de=["disabled"],ce=["disabled"];function he(t,s,n,a,l,i){return d(),c("section",v,[e("div",y,[e("div",P,[k,e("div",C,[e("div",L,[e("div",U,[m(e("select",{"onUpdate:modelValue":s[0]||(s[0]=o=>l.selectedRole=o),class:"block w-full px-4 py-2 pr-8 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200"},j,512),[[g,l.selectedRole]]),S]),e("div",A,[e("button",{onClick:s[1]||(s[1]=(...o)=>i.createUser&&i.createUser(...o)),class:"py-2 px-4 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-md focus:outline-none focus:ring focus:ring-blue-200"}," Create User ")])]),e("div",E,[m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>l.searchTerm=o),onInput:s[3]||(s[3]=(...o)=>i.applySearch&&i.applySearch(...o)),type:"text",class:"block w-full px-4 py-2 pr-8 bg-white border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200",placeholder:"Search..."},null,544),[[_,l.searchTerm]]),B]),e("div",M,[l.isLoading?(d(),c("div",oe,re)):(d(),c("table",D,[N,e("tbody",V,[(d(!0),c(b,null,x(i.paginatedList,(o,h)=>(d(),c("tr",{key:h},[e("td",F,[e("div",H,[e("div",q,[e("img",{class:"rounded-full",src:o.image,width:"40",height:"40",alt:o.name},null,8,z)]),e("div",G,r(o.name),1)])]),e("td",J,[e("div",K,r(o.role),1)]),e("td",O,[e("div",Q,r(o.code),1)]),e("td",W,[e("div",X,r(o.email),1)]),e("td",Y,[e("div",Z,r(o.tele),1)]),e("td",$,[e("div",ee,[e("button",{onClick:f=>i.editUser(h),class:"text-blue-500 hover:underline",title:"Edit"}," Edit ",8,te),e("button",{onClick:f=>i.deleteUser(h),class:"text-red-500 hover:underline",title:"Delete"}," Delete ",8,se)])])]))),128))])]))]),e("div",le,[e("div",null,[e("p",ne," Showing "+r(i.startItem)+" to "+r(i.endItem)+" of "+r(i.filteredList.length)+" entries ",1)]),e("div",ae,[e("button",{onClick:s[4]||(s[4]=(...o)=>i.prevPage&&i.prevPage(...o)),disabled:l.currentPage===1,class:"px-3 py-2 text-sm rounded-md border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring focus:ring-blue-200"}," Previous ",8,de),e("button",{onClick:s[5]||(s[5]=(...o)=>i.nextPage&&i.nextPage(...o)),disabled:l.currentPage===i.pageCount,class:"px-3 py-2 text-sm rounded-md border border-gray-300 hover:bg-gray-100 focus:outline-none focus:ring focus:ring-blue-200"}," Next ",8,ce)])])])])])])}const me=p(w,[["render",he]]);export{me as default};
